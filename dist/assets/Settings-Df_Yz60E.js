import{c as j,V as N,_ as I,W as E,Y as ke,Z as xe,$ as K,a0 as Qe,a1 as O,E as l,a as et,C as tt,r as g,j as i,a2 as nt,n as st,d as ae,b as ce,G as it,a3 as rt,a4 as ot}from"./index-CrkXj5Pf.js";import{L as at}from"./lock-_3AXRtUS.js";import{S as ct}from"./shield-D7z6iHt_.js";import{T as ut}from"./trash-2-DjSNPS4n.js";const dt=j("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const lt=j("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const ue=j("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const ft=j("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Te="@firebase/installations",B="0.6.19";const ve=1e4,Se=`w:${B}`,Ne="FIS_v2",pt="https://firebaseinstallations.googleapis.com/v1",gt=3600*1e3,ht="installations",mt="Installations";const wt={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},y=new xe(ht,mt,wt);function Ie(e){return e instanceof Qe&&e.code.includes("request-failed")}function Ee({projectId:e}){return`${pt}/projects/${e}/installations`}function Ae(e){return{token:e.token,requestStatus:2,expiresIn:yt(e.expiresIn),creationTime:Date.now()}}async function je(e,t){const s=(await t.json()).error;return y.create("request-failed",{requestName:e,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Pe({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function bt(e,{refreshToken:t}){const n=Pe(e);return n.append("Authorization",kt(t)),n}async function Ce(e){const t=await e();return t.status>=500&&t.status<600?e():t}function yt(e){return Number(e.replace("s","000"))}function kt(e){return`${Ne} ${e}`}async function xt({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const s=Ee(e),r=Pe(e),o=t.getImmediate({optional:!0});if(o){const a=await o.getHeartbeatsHeader();a&&r.append("x-firebase-client",a)}const c={fid:n,authVersion:Ne,appId:e.appId,sdkVersion:Se},d={method:"POST",headers:r,body:JSON.stringify(c)},f=await Ce(()=>fetch(s,d));if(f.ok){const a=await f.json();return{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:Ae(a.authToken)}}else throw await je("Create Installation",f)}function _e(e){return new Promise(t=>{setTimeout(t,e)})}function Tt(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}const vt=/^[cdef][\w-]{21}$/,$="";function St(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=Nt(e);return vt.test(n)?n:$}catch{return $}}function Nt(e){return Tt(e).substr(0,22)}function P(e){return`${e.appName}!${e.appId}`}const De=new Map;function Oe(e,t){const n=P(e);Me(n,t),It(n,t)}function Me(e,t){const n=De.get(e);if(n)for(const s of n)s(t)}function It(e,t){const n=Et();n&&n.postMessage({key:e,fid:t}),At()}let b=null;function Et(){return!b&&"BroadcastChannel"in self&&(b=new BroadcastChannel("[Firebase] FID Change"),b.onmessage=e=>{Me(e.data.key,e.data.fid)}),b}function At(){De.size===0&&b&&(b.close(),b=null)}const jt="firebase-installations-database",Pt=1,k="firebase-installations-store";let M=null;function V(){return M||(M=K(jt,Pt,{upgrade:(e,t)=>{t===0&&e.createObjectStore(k)}})),M}async function A(e,t){const n=P(e),r=(await V()).transaction(k,"readwrite"),o=r.objectStore(k),c=await o.get(n);return await o.put(t,n),await r.done,(!c||c.fid!==t.fid)&&Oe(e,t.fid),t}async function Re(e){const t=P(e),s=(await V()).transaction(k,"readwrite");await s.objectStore(k).delete(t),await s.done}async function C(e,t){const n=P(e),r=(await V()).transaction(k,"readwrite"),o=r.objectStore(k),c=await o.get(n),d=t(c);return d===void 0?await o.delete(n):await o.put(d,n),await r.done,d&&(!c||c.fid!==d.fid)&&Oe(e,d.fid),d}async function U(e){let t;const n=await C(e.appConfig,s=>{const r=Ct(s),o=_t(e,r);return t=o.registrationPromise,o.installationEntry});return n.fid===$?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function Ct(e){const t=e||{fid:St(),registrationStatus:0};return Fe(t)}function _t(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(y.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},s=Dt(e,n);return{installationEntry:n,registrationPromise:s}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Ot(e)}:{installationEntry:t}}async function Dt(e,t){try{const n=await xt(e,t);return A(e.appConfig,n)}catch(n){throw Ie(n)&&n.customData.serverCode===409?await Re(e.appConfig):await A(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function Ot(e){let t=await de(e.appConfig);for(;t.registrationStatus===1;)await _e(100),t=await de(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await U(e);return s||n}return t}function de(e){return C(e,t=>{if(!t)throw y.create("installation-not-found");return Fe(t)})}function Fe(e){return Mt(e)?{fid:e.fid,registrationStatus:0}:e}function Mt(e){return e.registrationStatus===1&&e.registrationTime+ve<Date.now()}async function Rt({appConfig:e,heartbeatServiceProvider:t},n){const s=Ft(e,n),r=bt(e,n),o=t.getImmediate({optional:!0});if(o){const a=await o.getHeartbeatsHeader();a&&r.append("x-firebase-client",a)}const c={installation:{sdkVersion:Se,appId:e.appId}},d={method:"POST",headers:r,body:JSON.stringify(c)},f=await Ce(()=>fetch(s,d));if(f.ok){const a=await f.json();return Ae(a)}else throw await je("Generate Auth Token",f)}function Ft(e,{fid:t}){return`${Ee(e)}/${t}/authTokens:generate`}async function H(e,t=!1){let n;const s=await C(e.appConfig,o=>{if(!qe(o))throw y.create("not-registered");const c=o.authToken;if(!t&&$t(c))return o;if(c.requestStatus===1)return n=qt(e,t),o;{if(!navigator.onLine)throw y.create("app-offline");const d=Bt(o);return n=Lt(e,d),d}});return n?await n:s.authToken}async function qt(e,t){let n=await le(e.appConfig);for(;n.authToken.requestStatus===1;)await _e(100),n=await le(e.appConfig);const s=n.authToken;return s.requestStatus===0?H(e,t):s}function le(e){return C(e,t=>{if(!qe(t))throw y.create("not-registered");const n=t.authToken;return Vt(n)?{...t,authToken:{requestStatus:0}}:t})}async function Lt(e,t){try{const n=await Rt(e,t),s={...t,authToken:n};return await A(e.appConfig,s),n}catch(n){if(Ie(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Re(e.appConfig);else{const s={...t,authToken:{requestStatus:0}};await A(e.appConfig,s)}throw n}}function qe(e){return e!==void 0&&e.registrationStatus===2}function $t(e){return e.requestStatus===2&&!Kt(e)}function Kt(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+gt}function Bt(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function Vt(e){return e.requestStatus===1&&e.requestTime+ve<Date.now()}async function Ut(e){const t=e,{installationEntry:n,registrationPromise:s}=await U(t);return s?s.catch(console.error):H(t).catch(console.error),n.fid}async function Ht(e,t=!1){const n=e;return await zt(n),(await H(n,t)).token}async function zt(e){const{registrationPromise:t}=await U(e);t&&await t}function Wt(e){if(!e||!e.options)throw R("App Configuration");if(!e.name)throw R("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw R(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function R(e){return y.create("missing-app-config-values",{valueName:e})}const Le="installations",Gt="installations-internal",Jt=e=>{const t=e.getProvider("app").getImmediate(),n=Wt(t),s=ke(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},Yt=e=>{const t=e.getProvider("app").getImmediate(),n=ke(t,Le).getImmediate();return{getId:()=>Ut(n),getToken:r=>Ht(n,r)}};function Zt(){I(new E(Le,Jt,"PUBLIC")),I(new E(Gt,Yt,"PRIVATE"))}Zt();N(Te,B);N(Te,B,"esm2020");const Xt="/firebase-messaging-sw.js",Qt="/firebase-cloud-messaging-push-scope",$e="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",en="https://fcmregistrations.googleapis.com/v1",Ke="google.c.a.c_id",tn="google.c.a.c_l",nn="google.c.a.ts",sn="google.c.a.e",fe=1e4;var pe;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(pe||(pe={}));var v;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(v||(v={}));function h(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rn(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),r=new Uint8Array(s.length);for(let o=0;o<s.length;++o)r[o]=s.charCodeAt(o);return r}const F="fcm_token_details_db",on=5,ge="fcm_token_object_Store";async function an(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(F))return null;let t=null;return(await K(F,on,{upgrade:async(s,r,o,c)=>{if(r<2||!s.objectStoreNames.contains(ge))return;const d=c.objectStore(ge),f=await d.index("fcmSenderId").get(e);if(await d.clear(),!!f){if(r===2){const a=f;if(!a.auth||!a.p256dh||!a.endpoint)return;t={token:a.fcmToken,createTime:a.createTime??Date.now(),subscriptionOptions:{auth:a.auth,p256dh:a.p256dh,endpoint:a.endpoint,swScope:a.swScope,vapidKey:typeof a.vapidKey=="string"?a.vapidKey:h(a.vapidKey)}}}else if(r===3){const a=f;t={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:h(a.auth),p256dh:h(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:h(a.vapidKey)}}}else if(r===4){const a=f;t={token:a.fcmToken,createTime:a.createTime,subscriptionOptions:{auth:h(a.auth),p256dh:h(a.p256dh),endpoint:a.endpoint,swScope:a.swScope,vapidKey:h(a.vapidKey)}}}}}})).close(),await O(F),await O("fcm_vapid_details_db"),await O("undefined"),cn(t)?t:null}function cn(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const un="firebase-messaging-database",dn=1,S="firebase-messaging-store";let q=null;function Be(){return q||(q=K(un,dn,{upgrade:(e,t)=>{t===0&&e.createObjectStore(S)}})),q}async function ln(e){const t=Ve(e),s=await(await Be()).transaction(S).objectStore(S).get(t);if(s)return s;{const r=await an(e.appConfig.senderId);if(r)return await z(e,r),r}}async function z(e,t){const n=Ve(e),r=(await Be()).transaction(S,"readwrite");return await r.objectStore(S).put(t,n),await r.done,t}function Ve({appConfig:e}){return e.appId}const fn={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},p=new xe("messaging","Messaging",fn);async function pn(e,t){const n=await G(e),s=Ue(t),r={method:"POST",headers:n,body:JSON.stringify(s)};let o;try{o=await(await fetch(W(e.appConfig),r)).json()}catch(c){throw p.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw p.create("token-subscribe-failed",{errorInfo:c})}if(!o.token)throw p.create("token-subscribe-no-token");return o.token}async function gn(e,t){const n=await G(e),s=Ue(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(s)};let o;try{o=await(await fetch(`${W(e.appConfig)}/${t.token}`,r)).json()}catch(c){throw p.create("token-update-failed",{errorInfo:c?.toString()})}if(o.error){const c=o.error.message;throw p.create("token-update-failed",{errorInfo:c})}if(!o.token)throw p.create("token-update-no-token");return o.token}async function hn(e,t){const s={method:"DELETE",headers:await G(e)};try{const o=await(await fetch(`${W(e.appConfig)}/${t}`,s)).json();if(o.error){const c=o.error.message;throw p.create("token-unsubscribe-failed",{errorInfo:c})}}catch(r){throw p.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}}function W({projectId:e}){return`${en}/projects/${e}/registrations`}async function G({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Ue({p256dh:e,auth:t,endpoint:n,vapidKey:s}){const r={web:{endpoint:n,auth:t,p256dh:e}};return s!==$e&&(r.web.applicationPubKey=s),r}const mn=10080*60*1e3;async function wn(e){const t=await yn(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:h(t.getKey("auth")),p256dh:h(t.getKey("p256dh"))},s=await ln(e.firebaseDependencies);if(s){if(kn(s.subscriptionOptions,n))return Date.now()>=s.createTime+mn?bn(e,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await hn(e.firebaseDependencies,s.token)}catch(r){console.warn(r)}return he(e.firebaseDependencies,n)}else return he(e.firebaseDependencies,n)}async function bn(e,t){try{const n=await gn(e.firebaseDependencies,t),s={...t,token:n,createTime:Date.now()};return await z(e.firebaseDependencies,s),n}catch(n){throw n}}async function he(e,t){const s={token:await pn(e,t),createTime:Date.now(),subscriptionOptions:t};return await z(e,s),s.token}async function yn(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rn(t)})}function kn(e,t){const n=t.vapidKey===e.vapidKey,s=t.endpoint===e.endpoint,r=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&s&&r&&o}function me(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return xn(t,e),Tn(t,e),vn(t,e),t}function xn(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const s=t.notification.body;s&&(e.notification.body=s);const r=t.notification.image;r&&(e.notification.image=r);const o=t.notification.icon;o&&(e.notification.icon=o)}function Tn(e,t){t.data&&(e.data=t.data)}function vn(e,t){if(!t.fcmOptions&&!t.notification?.click_action)return;e.fcmOptions={};const n=t.fcmOptions?.link??t.notification?.click_action;n&&(e.fcmOptions.link=n);const s=t.fcmOptions?.analytics_label;s&&(e.fcmOptions.analyticsLabel=s)}function Sn(e){return typeof e=="object"&&!!e&&Ke in e}function Nn(e){if(!e||!e.options)throw L("App Configuration Object");if(!e.name)throw L("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const s of t)if(!n[s])throw L(s);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function L(e){return p.create("missing-app-config-values",{valueName:e})}class In{constructor(t,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=Nn(t);this.firebaseDependencies={app:t,appConfig:r,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}async function En(e){try{e.swRegistration=await navigator.serviceWorker.register(Xt,{scope:Qt}),e.swRegistration.update().catch(()=>{}),await An(e.swRegistration)}catch(t){throw p.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function An(e){return new Promise((t,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${fe} ms`)),fe),r=e.installing||e.waiting;e.active?(clearTimeout(s),t()):r?r.onstatechange=o=>{o.target?.state==="activated"&&(r.onstatechange=null,clearTimeout(s),t())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}async function jn(e,t){if(!t&&!e.swRegistration&&await En(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw p.create("invalid-sw-registration");e.swRegistration=t}}async function Pn(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=$e)}async function Cn(e,t){if(!navigator)throw p.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw p.create("permission-blocked");return await Pn(e,t?.vapidKey),await jn(e,t?.serviceWorkerRegistration),wn(e)}async function _n(e,t,n){const s=Dn(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[Ke],message_name:n[tn],message_time:n[nn],message_device_time:Math.floor(Date.now()/1e3)})}function Dn(e){switch(e){case v.NOTIFICATION_CLICKED:return"notification_open";case v.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function On(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===v.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(me(n)):e.onMessageHandler.next(me(n)));const s=n.data;Sn(s)&&s[sn]==="1"&&await _n(e,n.messageType,s)}const we="@firebase/messaging",be="0.12.23";const Mn=e=>{const t=new In(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>On(t,n)),t},Rn=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:s=>Cn(t,s)}};function Fn(){I(new E("messaging",Mn,"PUBLIC")),I(new E("messaging-internal",Rn,"PRIVATE")),N(we,be),N(we,be,"esm2020")}Fn();function J(){return typeof window<"u"&&"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window}function ye(){return J()?Notification.permission:"unsupported"}async function qn(e){if(!J())return l.error("Push notifications are not supported on this device"),null;try{const t=await Notification.requestPermission();if(t==="granted"){const n=await Ln(e);if(n)return l.success("Notifications enabled!"),n}else t==="denied"&&l.error("Notification permission denied");return null}catch(t){return console.error("Error requesting notification permission:",t),l.error("Failed to enable notifications"),null}}async function Ln(e){return console.error("Messaging not initialized"),null}function Un(){const{currentUser:e,changeEmail:t,changePassword:n,updateUserProfile:s,logout:r}=et(),o=tt(),[c,d]=g.useState(""),[f,a]=g.useState(!1),[m,Y]=g.useState(""),[_,Z]=g.useState(""),[X,Q]=g.useState(!1),[ee,He]=g.useState(e?.preferences?.emailNotifications??!0),[te,ze]=g.useState(e?.preferences?.publicProfile??!0),[ne,se]=g.useState(!1),[T,We]=g.useState(!1),[w,D]=g.useState("default"),[ie,re]=g.useState(!1);g.useEffect(()=>{We(J()),D(ye())},[]);async function Ge(){re(!0);try{const u=await qn(e?.uid);D(u?"granted":ye())}catch(u){console.error("Error enabling push notifications:",u)}finally{re(!1)}}async function Je(u){if(u.preventDefault(),!(!c||c===e.email)){a(!0);try{await t(c),await st(ae(ce,"users",e.uid),{email:c}),d(""),l.success("Email updated successfully! âœ…")}catch(x){console.error("Error updating email:",x),x.code==="auth/requires-recent-login"?l.error("Please log out and log back in to change your email"):l.error("Failed to update email")}finally{a(!1)}}}async function Ye(u){if(u.preventDefault(),m!==_){l.error("Passwords do not match");return}if(m.length<6){l.error("Password must be at least 6 characters");return}Q(!0);try{await n(m),Y(""),Z(""),l.success("Password updated successfully! ðŸ”’")}catch(x){console.error("Error updating password:",x),x.code==="auth/requires-recent-login"?l.error("Please log out and log back in to change your password"):l.error("Failed to update password")}finally{Q(!1)}}async function Ze(){se(!0);try{await s({preferences:{theme:"dark",emailNotifications:ee,publicProfile:te}}),l.success("Preferences saved! âœ¨")}catch(u){console.error("Error saving preferences:",u),l.error("Failed to save preferences")}finally{se(!1)}}async function Xe(){if(!window.confirm("Are you sure you want to delete your account? This action cannot be undone."))return;if(window.prompt('Type "DELETE" to confirm account deletion')!=="DELETE"){l.error("Account deletion cancelled");return}try{await it(ae(ce,"users",e.uid)),await rt(ot.currentUser),l.success("Account deleted"),o("/login")}catch(oe){console.error("Error deleting account:",oe),oe.code==="auth/requires-recent-login"?l.error("Please log out and log back in to delete your account"):l.error("Failed to delete account")}}return i.jsxs("section",{className:"mx-auto max-w-4xl px-4 py-12",children:[i.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center gap-3",children:[i.jsx(nt,{size:32}),"Settings"]}),i.jsx("p",{className:"text-zinc-300 mb-8",children:"Manage your account and preferences"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"glass p-6 rounded-2xl",children:[i.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(lt,{size:20}),"Account Settings"]}),i.jsxs("form",{onSubmit:Je,className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"email",value:c,onChange:u=>d(u.target.value),placeholder:e?.email,className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-400"}),i.jsx("button",{type:"submit",disabled:f||!c,className:"px-4 py-2 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Updating...":"Update"})]})]}),i.jsxs("form",{onSubmit:Ye,children:[i.jsxs("label",{className:"block text-sm font-medium mb-2 flex items-center gap-2",children:[i.jsx(at,{size:16}),"Change Password"]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"password",value:m,onChange:u=>Y(u.target.value),placeholder:"New password",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-400"}),i.jsx("input",{type:"password",value:_,onChange:u=>Z(u.target.value),placeholder:"Confirm new password",className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand-400"}),i.jsx("button",{type:"submit",disabled:X||!m||!_,className:"px-4 py-2 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:X?"Updating...":"Change Password"})]})]})]}),i.jsxs("div",{className:"glass p-6 rounded-2xl",children:[i.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(ct,{size:20}),"Privacy Settings"]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Public Profile"}),i.jsx("div",{className:"text-sm text-zinc-400",children:"Allow others to see your profile"})]}),i.jsxs("label",{className:"relative inline-block w-12 h-6",children:[i.jsx("input",{type:"checkbox",checked:te,onChange:u=>ze(u.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-full h-full bg-white/10 peer-checked:bg-brand-400 rounded-full peer transition-all cursor-pointer"}),i.jsx("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full peer-checked:translate-x-6 transition-all"})]})]})})]}),i.jsxs("div",{className:"glass p-6 rounded-2xl",children:[i.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(dt,{size:20}),"Notification Settings"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium flex items-center gap-2",children:[i.jsx(ft,{size:16}),"Push Notifications"]}),i.jsxs("div",{className:"text-sm text-zinc-400",children:[!T&&"Not supported on this device",T&&w==="granted"&&"Enabled - you will receive push notifications",T&&w==="denied"&&"Blocked - enable in browser settings",T&&w==="default"&&"Get notified about messages and matches"]})]}),T&&w!=="granted"&&w!=="denied"&&i.jsx("button",{onClick:Ge,disabled:ie,className:"px-4 py-2 btn-primary text-sm disabled:opacity-50",children:ie?"Enabling...":"Enable"}),w==="granted"&&i.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm",children:"Enabled"}),w==="denied"&&i.jsx("span",{className:"px-3 py-1 bg-red-500/20 text-red-400 rounded-full text-sm",children:"Blocked"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Email Notifications"}),i.jsx("div",{className:"text-sm text-zinc-400",children:"Receive updates via email"})]}),i.jsxs("label",{className:"relative inline-block w-12 h-6",children:[i.jsx("input",{type:"checkbox",checked:ee,onChange:u=>He(u.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-full h-full bg-white/10 peer-checked:bg-brand-400 rounded-full peer transition-all cursor-pointer"}),i.jsx("div",{className:"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full peer-checked:translate-x-6 transition-all"})]})]})]}),i.jsx("button",{onClick:Ze,disabled:ne,className:"mt-4 px-4 py-2 btn-primary disabled:opacity-50",children:ne?"Saving...":"Save Preferences"})]}),i.jsxs("div",{className:"glass p-6 rounded-2xl",children:[i.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[i.jsx(ue,{size:20}),"Appearance"]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Theme"}),i.jsx("div",{className:"text-sm text-zinc-400",children:"Currently using Dark theme"})]}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 border border-white/10 rounded-lg",children:[i.jsx(ue,{size:16,className:"text-brand-400"}),i.jsx("span",{className:"font-medium",children:"Dark"})]})]}),i.jsx("p",{className:"text-xs text-zinc-500 mt-3",children:"ðŸ’¡ Light theme coming in a future update"})]}),i.jsxs("div",{className:"glass p-6 rounded-2xl border-2 border-red-500/20",children:[i.jsxs("h3",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-red-400",children:[i.jsx(ut,{size:20}),"Danger Zone"]}),i.jsx("p",{className:"text-zinc-300 mb-4",children:"Once you delete your account, there is no going back. Please be certain."}),i.jsx("button",{onClick:Xe,className:"px-6 py-2 bg-red-500/20 border border-red-500/40 text-red-400 rounded-lg hover:bg-red-500/30 transition",children:"Delete Account"})]})]})]})}export{Un as default};
